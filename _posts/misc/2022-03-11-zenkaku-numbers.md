---
layout:        post
title:         "フォームで全角数字を入力させる必要はあるのか"
date:          2022-03-11
category:      Misc
cover:         /assets/cover14.jpg
redirect_from:
comments:      true
published:     false
latex:         false
photoswipe:    false
# sitemap: false
# feed:    false
---

例えば郵便番号は半角で入力するけど、住所の番地などは全角で入力させるシステムがあります。
数字を全角半角で分類する必要がない場合もありますが、UX (ユーザの使いやすさ) を軽視してでも全角数字を使わせたい理由は以下のものがあります。

### 揺らぎ対策・検索しやすさのため
郵便物を送るために住所を入力させる場合は、住所の文字の数字が全角でも半角でも問題にはなりません。
しかし、行政システムでは住所から住民を検索する機能（住所検索）があるのですが、半角数字と全角数字が混在すると正しく検索できなくなります。
また、システムAのデータとシステムBのデータを突合する (Joinする) ときに、半角数字と全角数字が混在すると正しく突合できなくなります。
半角全角が混在しているとソートができないので、全角数字に統一していると考えられます。
また、帳票システムによって出力される結果を統一させる目的のために、住所部分は常に全角数字を入力させている場合もあります。
いずれにしても、入力時に半角数字を全角数字に置換する簡単な機能を加えればいいのに、実装時にはそれすらも工数としてカウントされ、動作テストの項目が増える要因になり得るので、設計時に積極的にUXを重視した実装をする機会が失われていると考えられます。

### 古いシステムでは全角/半角キーなしでも入力できる
これはブラウザ全般の話ではなく、**ActiveX**と呼ばれるIEでのみ使用できる古の技術の話です。
ActiveXなどの古のシステムでは、フォームの入力欄にフォーカスを当てるだけで IME モードが変わり、全角半角のモードが切り替わります。
令和の時代でも、行政システムなどの内向けのシステムではActiveXみたいな古くて危ない仕組みを平気で使い続けており、今でもActiveXに関係するシステムを開発したり、それを利用したりしているユーザは多いと思います。
ActiveXを使えば「全角/半角」キーを押さなくても、フォームにフォーカスが当たった時点で適切な IME モードが選択されて、作業者は意識的に全角数字を選んで入力する必要がなくなり、データ入力業務の作業者の負担が減ります。
そして、このような古のシステム上で設計をしてきた人たちが、その思想を引き継いだまま Web システムの設計をすることで、無条件に住所では全角数字を入力させる習慣が引き継がれていると考えられます。

### 結論
これから新規に開発・実装する場合は、以下の点を設計段階から考慮するのが良いと思います。

- 入力した住所が主キーとして使われることはあるか（住所検索や突合、ソートなど）
- 全角に統一する場合は、システム側で勝手に半角から全角に変換することは可能か
- IEに依存しないで、UXを考慮した実装を心がけよう

以上です。

---
#### 参考文献
「IEはオワコン、ActiveXを止めろ」と思うたびに読みたい記事：
<!-- markdown-link-check-disable -->
- [何故お役所ってオワコンIEが大好きなの？｜楠 正憲（デジタル庁統括官）](https://comemo.nikkei.com/n/n1c9103c81c79)
<!-- markdown-link-check-enable-->
