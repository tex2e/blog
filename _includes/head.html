<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>{% if page.title %}{{ page.title | strip_html | escape }} | {{ site.title | strip_html | escape }}{% else %}{{ site.title | strip_html | escape }}{% endif %}</title>
  <meta name="description" content="{% if page.description %}{{ page.description }}{% else if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{% endif %}">
  <link rel="shortcut icon" href="{{ site.baseurl }}/assets/favicon.ico">

  {%- if page.noindex or page.draft %}
  <!-- noindex -->
  <meta name="robots" content="noindex">
  {%- endif %}

  {%- if page.redirect_to_top %}
  <!-- Redirect when 404 -->
  <meta http-equiv="refresh" content="5;URL='{{ site.baseurl }}/'" />
  {%- endif %}

  <!-- Open Graph data, Twitter data -->
{% include ogp.html %}

  <!-- CSS -->
  <link rel="stylesheet" href="{{ site.baseurl }}/css/screen.css">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ "/feed.xml" | prepend: site.baseurl }}">

  <!-- jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  {%- if page.latex %}
  <!-- KaTeX -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
    integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"
    integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js"
    integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"></script>
  <script>
  document.addEventListener("DOMContentLoaded", function () {
    renderMathInElement(document.body, {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false },
        { left: "\\[", right: "\\]", display: true },
        { left: "\\(", right: "\\)", display: false },
      ]
    });
  });
  </script>
  {%- endif %}

  {%- if page.mermaid %}
  <script src="https://unpkg.com/mermaid@10.9.3/dist/mermaid.min.js"></script>
  <script>
    $(document).ready(function () {
      mermaid.initialize({
        startOnLoad: true,
        theme: 'default',
        flowchart: {
          useMaxWidth: false,
          htmlLabels: true
        }
      })
      window.mermaid.init(undefined, document.querySelectorAll('code.language-mermaid'));
    });
  </script>
  {%- endif %}

  {%- if jekyll.environment == "production" %}
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <!--   https://developers.google.com/tag-platform/devguides/consent -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-75892425-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}

    // GDPR for EU
    gtag('consent', 'default', {
      'analytics_storage': 'denied',
      'region': ['BE', 'BG', 'CZ', 'DK', 'DE', 'EE', 'IE', 'GR', 'ES', 'FR', 'HR', 'IT', 'CY', 'LV', 'LT', 'LU', 'HU', 'MT', 'NL', 'AT', 'PL', 'PT', 'RO', 'SI', 'SK', 'FI', 'SE']
    });
    gtag('consent', 'default', {
      'ad_storage': 'denied'
    });

    gtag('js', new Date());
    gtag('config', 'UA-75892425-1');

    function consentGranted() {
      gtag('consent', 'update', {
        'analytics_storage': 'granted',
        'region': ['BE', 'BG', 'CZ', 'DK', 'DE', 'EE', 'IE', 'GR', 'ES', 'FR', 'HR', 'IT', 'CY', 'LV', 'LT', 'LU', 'HU', 'MT', 'NL', 'AT', 'PL', 'PT', 'RO', 'SI', 'SK', 'FI', 'SE']
      });
    }
  </script>
  {%- endif %}
</head>
